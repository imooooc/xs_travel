<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            max-width: 980px;
            border: 1px solid #ddd;
            outline: 1300px solid #fff;
            margin: 16px auto;
        }

        body .markdown-body {
            padding: 45px;
        }

        @font-face {
            font-family: fontawesome-mini;
            src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
        }

        .markdown-body {
            font-family: sans-serif;
            -ms-text-size-adjust: 100%;
            -webkit-text-size-adjust: 100%;
            color: #333333;
            overflow: hidden;
            font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
            font-size: 16px;
            line-height: 1.6;
            word-wrap: break-word;
        }

        .markdown-body a {
            background: transparent;
        }

        .markdown-body a:active,
        .markdown-body a:hover {
            outline: 0;
        }

        .markdown-body b,
        .markdown-body strong {
            font-weight: bold;
        }

        .markdown-body mark {
            background: #ff0;
            color: #000;
            font-style: italic;
            font-weight: bold;
        }

        .markdown-body sub,
        .markdown-body sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline;
        }

        .markdown-body sup {
            top: -0.5em;
        }

        .markdown-body sub {
            bottom: -0.25em;
        }

        .markdown-body h1 {
            font-size: 2em;
            margin: 0.67em 0;
        }

        .markdown-body img {
            border: 0;
        }

        .markdown-body hr {
            -moz-box-sizing: content-box;
            box-sizing: content-box;
            height: 0;
        }

        .markdown-body pre {
            overflow: auto;
        }

        .markdown-body code,
        .markdown-body kbd,
        .markdown-body pre,
        .markdown-body samp {
            font-family: monospace, monospace;
            font-size: 1em;
        }

        .markdown-body input {
            color: inherit;
            font: inherit;
            margin: 0;
        }

        .markdown-body html input[disabled] {
            cursor: default;
        }

        .markdown-body input {
            line-height: normal;
        }

        .markdown-body input[type="checkbox"] {
            box-sizing: border-box;
            padding: 0;
        }

        .markdown-body table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        .markdown-body td,
        .markdown-body th {
            padding: 0;
        }

        .markdown-body .codehilitetable {
            border: 0;
            border-spacing: 0;
        }

        .markdown-body .codehilitetable tr {
            border: 0;
        }

        .markdown-body .codehilitetable pre,
        .markdown-body .codehilitetable div.codehilite {
            margin: 0;
        }

        .markdown-body .linenos,
        .markdown-body .code,
        .markdown-body .codehilitetable td {
            border: 0;
            padding: 0;
        }

        .markdown-body td:not(.linenos) .linenodiv {
            padding: 0 !important;
        }

        .markdown-body .code {
            width: 100%;
        }

        .markdown-body .linenos div pre,
        .markdown-body .linenodiv pre,
        .markdown-body .linenodiv {
            border: 0;
            -webkit-border-radius: 0;
            -moz-border-radius: 0;
            border-radius: 0;
            -webkit-border-top-left-radius: 3px;
            -webkit-border-bottom-left-radius: 3px;
            -moz-border-radius-topleft: 3px;
            -moz-border-radius-bottomleft: 3px;
            border-top-left-radius: 3px;
            border-bottom-left-radius: 3px;
        }

        .markdown-body .code div pre,
        .markdown-body .code div {
            border: 0;
            -webkit-border-radius: 0;
            -moz-border-radius: 0;
            border-radius: 0;
            -webkit-border-top-right-radius: 3px;
            -webkit-border-bottom-right-radius: 3px;
            -moz-border-radius-topright: 3px;
            -moz-border-radius-bottomright: 3px;
            border-top-right-radius: 3px;
            border-bottom-right-radius: 3px;
        }

        .markdown-body * {
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }

        .markdown-body input {
            font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.4;
        }

        .markdown-body a {
            color: #4183c4;
            text-decoration: none;
        }

        .markdown-body a:hover,
        .markdown-body a:focus,
        .markdown-body a:active {
            text-decoration: underline;
        }

        .markdown-body hr {
            height: 0;
            margin: 15px 0;
            overflow: hidden;
            background: transparent;
            border: 0;
            border-bottom: 1px solid #ddd;
        }

        .markdown-body hr:before,
        .markdown-body hr:after {
            display: table;
            content: " ";
        }

        .markdown-body hr:after {
            clear: both;
        }

        .markdown-body h1,
        .markdown-body h2,
        .markdown-body h3,
        .markdown-body h4,
        .markdown-body h5,
        .markdown-body h6 {
            margin-top: 15px;
            margin-bottom: 15px;
            line-height: 1.1;
        }

        .markdown-body h1 {
            font-size: 30px;
        }

        .markdown-body h2 {
            font-size: 21px;
        }

        .markdown-body h3 {
            font-size: 16px;
        }

        .markdown-body h4 {
            font-size: 14px;
        }

        .markdown-body h5 {
            font-size: 12px;
        }

        .markdown-body h6 {
            font-size: 11px;
        }

        .markdown-body blockquote {
            margin: 0;
        }

        .markdown-body ul,
        .markdown-body ol {
            padding: 0;
            margin-top: 0;
            margin-bottom: 0;
        }

        .markdown-body ol ol,
        .markdown-body ul ol {
            list-style-type: lower-roman;
        }

        .markdown-body ul ul ol,
        .markdown-body ul ol ol,
        .markdown-body ol ul ol,
        .markdown-body ol ol ol {
            list-style-type: lower-alpha;
        }

        .markdown-body dd {
            margin-left: 0;
        }

        .markdown-body code,
        .markdown-body pre,
        .markdown-body samp {
            font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
            font-size: 12px;
        }

        .markdown-body pre {
            margin-top: 0;
            margin-bottom: 0;
        }

        .markdown-body kbd {
            background-color: #e7e7e7;
            background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
            background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
            background-image: linear-gradient(#fefefe, #e7e7e7);
            background-repeat: repeat-x;
            border-radius: 2px;
            border: 1px solid #cfcfcf;
            color: #000;
            padding: 3px 5px;
            line-height: 10px;
            font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
            display: inline-block;
        }

        .markdown-body>*:first-child {
            margin-top: 0 !important;
        }

        .markdown-body>*:last-child {
            margin-bottom: 0 !important;
        }

        .markdown-body .headerlink {
            font: normal 400 16px fontawesome-mini;
            vertical-align: middle;
            margin-left: -16px;
            float: left;
            display: inline-block;
            text-decoration: none;
            opacity: 0;
            color: #333;
        }

        .markdown-body .headerlink:focus {
            outline: none;
        }

        .markdown-body h1 .headerlink {
            margin-top: 0.8rem;
        }

        .markdown-body h2 .headerlink,
        .markdown-body h3 .headerlink {
            margin-top: 0.6rem;
        }

        .markdown-body h4 .headerlink {
            margin-top: 0.2rem;
        }

        .markdown-body h5 .headerlink,
        .markdown-body h6 .headerlink {
            margin-top: 0;
        }

        .markdown-body .headerlink:hover,
        .markdown-body h1:hover .headerlink,
        .markdown-body h2:hover .headerlink,
        .markdown-body h3:hover .headerlink,
        .markdown-body h4:hover .headerlink,
        .markdown-body h5:hover .headerlink,
        .markdown-body h6:hover .headerlink {
            opacity: 1;
            text-decoration: none;
        }

        .markdown-body h1 {
            padding-bottom: 0.3em;
            font-size: 2.25em;
            line-height: 1.2;
            border-bottom: 1px solid #eee;
        }

        .markdown-body h2 {
            padding-bottom: 0.3em;
            font-size: 1.75em;
            line-height: 1.225;
            border-bottom: 1px solid #eee;
        }

        .markdown-body h3 {
            font-size: 1.5em;
            line-height: 1.43;
        }

        .markdown-body h4 {
            font-size: 1.25em;
        }

        .markdown-body h5 {
            font-size: 1em;
        }

        .markdown-body h6 {
            font-size: 1em;
            color: #777;
        }

        .markdown-body p,
        .markdown-body blockquote,
        .markdown-body ul,
        .markdown-body ol,
        .markdown-body dl,
        .markdown-body table,
        .markdown-body pre,
        .markdown-body .admonition {
            margin-top: 0;
            margin-bottom: 16px;
        }

        .markdown-body hr {
            height: 4px;
            padding: 0;
            margin: 16px 0;
            background-color: #e7e7e7;
            border: 0 none;
        }

        .markdown-body ul,
        .markdown-body ol {
            padding-left: 2em;
        }

        .markdown-body ul ul,
        .markdown-body ul ol,
        .markdown-body ol ol,
        .markdown-body ol ul {
            margin-top: 0;
            margin-bottom: 0;
        }

        .markdown-body li>p {
            margin-top: 16px;
        }

        .markdown-body dl {
            padding: 0;
        }

        .markdown-body dl dt {
            padding: 0;
            margin-top: 16px;
            font-size: 1em;
            font-style: italic;
            font-weight: bold;
        }

        .markdown-body dl dd {
            padding: 0 16px;
            margin-bottom: 16px;
        }

        .markdown-body blockquote {
            padding: 0 15px;
            color: #777;
            border-left: 4px solid #ddd;
        }

        .markdown-body blockquote>:first-child {
            margin-top: 0;
        }

        .markdown-body blockquote>:last-child {
            margin-bottom: 0;
        }

        .markdown-body table {
            display: block;
            width: 100%;
            overflow: auto;
            word-break: normal;
            word-break: keep-all;
        }

        .markdown-body table th {
            font-weight: bold;
        }

        .markdown-body table th,
        .markdown-body table td {
            padding: 6px 13px;
            border: 1px solid #ddd;
        }

        .markdown-body table tr {
            background-color: #fff;
            border-top: 1px solid #ccc;
        }

        .markdown-body table tr:nth-child(2n) {
            background-color: #f8f8f8;
        }

        .markdown-body img {
            max-width: 100%;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }

        .markdown-body code,
        .markdown-body samp {
            padding: 0;
            padding-top: 0.2em;
            padding-bottom: 0.2em;
            margin: 0;
            font-size: 85%;
            background-color: rgba(0, 0, 0, 0.04);
            border-radius: 3px;
        }

        .markdown-body code:before,
        .markdown-body code:after {
            letter-spacing: -0.2em;
            content: "\00a0";
        }

        .markdown-body pre>code {
            padding: 0;
            margin: 0;
            font-size: 100%;
            word-break: normal;
            white-space: pre;
            background: transparent;
            border: 0;
        }

        .markdown-body .codehilite {
            margin-bottom: 16px;
        }

        .markdown-body .codehilite pre,
        .markdown-body pre {
            padding: 16px;
            overflow: auto;
            font-size: 85%;
            line-height: 1.45;
            background-color: #f7f7f7;
            border-radius: 3px;
        }

        .markdown-body .codehilite pre {
            margin-bottom: 0;
            word-break: normal;
        }

        .markdown-body pre {
            word-wrap: normal;
        }

        .markdown-body pre code {
            display: inline;
            max-width: initial;
            padding: 0;
            margin: 0;
            overflow: initial;
            line-height: inherit;
            word-wrap: normal;
            background-color: transparent;
            border: 0;
        }

        .markdown-body pre code:before,
        .markdown-body pre code:after {
            content: normal;
        }

        /* Admonition */
        .markdown-body .admonition {
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            position: relative;
            border-radius: 3px;
            border: 1px solid #e0e0e0;
            border-left: 6px solid #333;
            padding: 10px 10px 10px 30px;
        }

        .markdown-body .admonition table {
            color: #333;
        }

        .markdown-body .admonition p {
            padding: 0;
        }

        .markdown-body .admonition-title {
            font-weight: bold;
            margin: 0;
        }

        .markdown-body .admonition>.admonition-title {
            color: #333;
        }

        .markdown-body .attention>.admonition-title {
            color: #a6d796;
        }

        .markdown-body .caution>.admonition-title {
            color: #d7a796;
        }

        .markdown-body .hint>.admonition-title {
            color: #96c6d7;
        }

        .markdown-body .danger>.admonition-title {
            color: #c25f77;
        }

        .markdown-body .question>.admonition-title {
            color: #96a6d7;
        }

        .markdown-body .note>.admonition-title {
            color: #d7c896;
        }

        .markdown-body .admonition:before,
        .markdown-body .attention:before,
        .markdown-body .caution:before,
        .markdown-body .hint:before,
        .markdown-body .danger:before,
        .markdown-body .question:before,
        .markdown-body .note:before {
            font: normal normal 16px fontawesome-mini;
            -moz-osx-font-smoothing: grayscale;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            line-height: 1.5;
            color: #333;
            position: absolute;
            left: 0;
            top: 0;
            padding-top: 10px;
            padding-left: 10px;
        }

        .markdown-body .admonition:before {
            content: "\f056\00a0";
            color: 333;
        }

        .markdown-body .attention:before {
            content: "\f058\00a0";
            color: #a6d796;
        }

        .markdown-body .caution:before {
            content: "\f06a\00a0";
            color: #d7a796;
        }

        .markdown-body .hint:before {
            content: "\f05a\00a0";
            color: #96c6d7;
        }

        .markdown-body .danger:before {
            content: "\f057\00a0";
            color: #c25f77;
        }

        .markdown-body .question:before {
            content: "\f059\00a0";
            color: #96a6d7;
        }

        .markdown-body .note:before {
            content: "\f040\00a0";
            color: #d7c896;
        }

        .markdown-body .admonition::after {
            content: normal;
        }

        .markdown-body .attention {
            border-left: 6px solid #a6d796;
        }

        .markdown-body .caution {
            border-left: 6px solid #d7a796;
        }

        .markdown-body .hint {
            border-left: 6px solid #96c6d7;
        }

        .markdown-body .danger {
            border-left: 6px solid #c25f77;
        }

        .markdown-body .question {
            border-left: 6px solid #96a6d7;
        }

        .markdown-body .note {
            border-left: 6px solid #d7c896;
        }

        .markdown-body .admonition>*:first-child {
            margin-top: 0 !important;
        }

        .markdown-body .admonition>*:last-child {
            margin-bottom: 0 !important;
        }

        /* progress bar*/
        .markdown-body .progress {
            display: block;
            width: 300px;
            margin: 10px 0;
            height: 24px;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;
            background-color: #ededed;
            position: relative;
            box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
        }

        .markdown-body .progress-label {
            position: absolute;
            text-align: center;
            font-weight: bold;
            width: 100%;
            margin: 0;
            line-height: 24px;
            color: #333;
            text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
            -webkit-font-smoothing: antialiased !important;
            white-space: nowrap;
            overflow: hidden;
        }

        .markdown-body .progress-bar {
            height: 24px;
            float: left;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;
            background-color: #96c6d7;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
            background-size: 30px 30px;
            background-image: -webkit-linear-gradient(135deg, rgba(255, 255, 255, .4) 27%,
                    transparent 27%,
                    transparent 52%, rgba(255, 255, 255, .4) 52%,
                    rgba(255, 255, 255, .4) 77%,
                    transparent 77%, transparent);
            background-image: -moz-linear-gradient(135deg,
                    rgba(255, 255, 255, .4) 27%, transparent 27%,
                    transparent 52%, rgba(255, 255, 255, .4) 52%,
                    rgba(255, 255, 255, .4) 77%, transparent 77%,
                    transparent);
            background-image: -ms-linear-gradient(135deg,
                    rgba(255, 255, 255, .4) 27%, transparent 27%,
                    transparent 52%, rgba(255, 255, 255, .4) 52%,
                    rgba(255, 255, 255, .4) 77%, transparent 77%,
                    transparent);
            background-image: -o-linear-gradient(135deg,
                    rgba(255, 255, 255, .4) 27%, transparent 27%,
                    transparent 52%, rgba(255, 255, 255, .4) 52%,
                    rgba(255, 255, 255, .4) 77%, transparent 77%,
                    transparent);
            background-image: linear-gradient(135deg,
                    rgba(255, 255, 255, .4) 27%, transparent 27%,
                    transparent 52%, rgba(255, 255, 255, .4) 52%,
                    rgba(255, 255, 255, .4) 77%, transparent 77%,
                    transparent);
        }

        .markdown-body .progress-100plus .progress-bar {
            background-color: #a6d796;
        }

        .markdown-body .progress-80plus .progress-bar {
            background-color: #c6d796;
        }

        .markdown-body .progress-60plus .progress-bar {
            background-color: #d7c896;
        }

        .markdown-body .progress-40plus .progress-bar {
            background-color: #d7a796;
        }

        .markdown-body .progress-20plus .progress-bar {
            background-color: #d796a6;
        }

        .markdown-body .progress-0plus .progress-bar {
            background-color: #c25f77;
        }

        .markdown-body .candystripe-animate .progress-bar {
            -webkit-animation: animate-stripes 3s linear infinite;
            -moz-animation: animate-stripes 3s linear infinite;
            animation: animate-stripes 3s linear infinite;
        }

        @-webkit-keyframes animate-stripes {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 60px 0;
            }
        }

        @-moz-keyframes animate-stripes {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 60px 0;
            }
        }

        @keyframes animate-stripes {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 60px 0;
            }
        }

        .markdown-body .gloss .progress-bar {
            box-shadow:
                inset 0 4px 12px rgba(255, 255, 255, .7),
                inset 0 -12px 0 rgba(0, 0, 0, .05);
        }

        /* MultiMarkdown Critic Blocks */
        .markdown-body .critic_mark {
            background: #ff0;
        }

        .markdown-body .critic_delete {
            color: #c82829;
            text-decoration: line-through;
        }

        .markdown-body .critic_insert {
            color: #718c00;
            text-decoration: underline;
        }

        .markdown-body .critic_comment {
            color: #8e908c;
            font-style: italic;
        }

        .markdown-body .headeranchor {
            font: normal normal 16px fontawesome-mini;
            line-height: 1;
            display: inline-block;
            text-decoration: none;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .headeranchor:before {
            content: '\e157';
        }

        .markdown-body .task-list-item {
            list-style-type: none;
        }

        .markdown-body .task-list-item+.task-list-item {
            margin-top: 3px;
        }

        .markdown-body .task-list-item input {
            margin: 0 4px 0.25em -20px;
            vertical-align: middle;
        }

        /* Media */
        @media only screen and (min-width: 480px) {
            .markdown-body {
                font-size: 14px;
            }
        }

        @media only screen and (min-width: 768px) {
            .markdown-body {
                font-size: 16px;
            }
        }

        @media print {
            .markdown-body * {
                background: transparent !important;
                color: black !important;
                filter: none !important;
                -ms-filter: none !important;
            }

            .markdown-body {
                font-size: 12pt;
                max-width: 100%;
                outline: none;
                border: 0;
            }

            .markdown-body a,
            .markdown-body a:visited {
                text-decoration: underline;
            }

            .markdown-body .headeranchor-link {
                display: none;
            }

            .markdown-body a[href]:after {
                content: " ("attr(href) ")";
            }

            .markdown-body abbr[title]:after {
                content: " ("attr(title) ")";
            }

            .markdown-body .ir a:after,
            .markdown-body a[href^="javascript:"]:after,
            .markdown-body a[href^="#"]:after {
                content: "";
            }

            .markdown-body pre {
                white-space: pre;
                white-space: pre-wrap;
                word-wrap: break-word;
            }

            .markdown-body pre,
            .markdown-body blockquote {
                border: 1px solid #999;
                padding-right: 1em;
                page-break-inside: avoid;
            }

            .markdown-body .progress,
            .markdown-body .progress-bar {
                -moz-box-shadow: none;
                -webkit-box-shadow: none;
                box-shadow: none;
            }

            .markdown-body .progress {
                border: 1px solid #ddd;
            }

            .markdown-body .progress-bar {
                height: 22px;
                border-right: 1px solid #ddd;
            }

            .markdown-body tr,
            .markdown-body img {
                page-break-inside: avoid;
            }

            .markdown-body img {
                max-width: 100% !important;
            }

            .markdown-body p,
            .markdown-body h2,
            .markdown-body h3 {
                orphans: 3;
                widows: 3;
            }

            .markdown-body h2,
            .markdown-body h3 {
                page-break-after: avoid;
            }
        }
    </style>
    <style>
        /*GitHub*/
        .codehilite {
            background-color: #fff;
            color: #333333;
        }

        .codehilite .hll {
            background-color: #ffffcc;
        }

        .codehilite .c {
            color: #999988;
            font-style: italic
        }

        .codehilite .err {
            color: #a61717;
            background-color: #e3d2d2
        }

        .codehilite .k {
            font-weight: bold
        }

        .codehilite .o {
            font-weight: bold
        }

        .codehilite .cm {
            color: #999988;
            font-style: italic
        }

        .codehilite .cp {
            color: #999999;
            font-weight: bold
        }

        .codehilite .c1 {
            color: #999988;
            font-style: italic
        }

        .codehilite .cs {
            color: #999999;
            font-weight: bold;
            font-style: italic
        }

        .codehilite .gd {
            color: #000000;
            background-color: #ffdddd
        }

        .codehilite .ge {
            font-style: italic
        }

        .codehilite .gr {
            color: #aa0000
        }

        .codehilite .gh {
            color: #999999
        }

        .codehilite .gi {
            color: #000000;
            background-color: #ddffdd
        }

        .codehilite .go {
            color: #888888
        }

        .codehilite .gp {
            color: #555555
        }

        .codehilite .gs {
            font-weight: bold
        }

        .codehilite .gu {
            color: #800080;
            font-weight: bold
        }

        .codehilite .gt {
            color: #aa0000
        }

        .codehilite .kc {
            font-weight: bold
        }

        .codehilite .kd {
            font-weight: bold
        }

        .codehilite .kn {
            font-weight: bold
        }

        .codehilite .kp {
            font-weight: bold
        }

        .codehilite .kr {
            font-weight: bold
        }

        .codehilite .kt {
            color: #445588;
            font-weight: bold
        }

        .codehilite .m {
            color: #009999
        }

        .codehilite .s {
            color: #dd1144
        }

        .codehilite .n {
            color: #333333
        }

        .codehilite .na {
            color: teal
        }

        .codehilite .nb {
            color: #0086b3
        }

        .codehilite .nc {
            color: #445588;
            font-weight: bold
        }

        .codehilite .no {
            color: teal
        }

        .codehilite .ni {
            color: purple
        }

        .codehilite .ne {
            color: #990000;
            font-weight: bold
        }

        .codehilite .nf {
            color: #990000;
            font-weight: bold
        }

        .codehilite .nn {
            color: #555555
        }

        .codehilite .nt {
            color: navy
        }

        .codehilite .nv {
            color: teal
        }

        .codehilite .ow {
            font-weight: bold
        }

        .codehilite .w {
            color: #bbbbbb
        }

        .codehilite .mf {
            color: #009999
        }

        .codehilite .mh {
            color: #009999
        }

        .codehilite .mi {
            color: #009999
        }

        .codehilite .mo {
            color: #009999
        }

        .codehilite .sb {
            color: #dd1144
        }

        .codehilite .sc {
            color: #dd1144
        }

        .codehilite .sd {
            color: #dd1144
        }

        .codehilite .s2 {
            color: #dd1144
        }

        .codehilite .se {
            color: #dd1144
        }

        .codehilite .sh {
            color: #dd1144
        }

        .codehilite .si {
            color: #dd1144
        }

        .codehilite .sx {
            color: #dd1144
        }

        .codehilite .sr {
            color: #009926
        }

        .codehilite .s1 {
            color: #dd1144
        }

        .codehilite .ss {
            color: #990073
        }

        .codehilite .bp {
            color: #999999
        }

        .codehilite .vc {
            color: teal
        }

        .codehilite .vg {
            color: teal
        }

        .codehilite .vi {
            color: teal
        }

        .codehilite .il {
            color: #009999
        }

        .codehilite .gc {
            color: #999;
            background-color: #EAF2F5
        }
    </style>
    <title>Vmoli开发文档</title>
</head>

<body>
    <article class="markdown-body">
        <h1 id="_1">车牌识别系统开发文档<a class="headerlink" href="#_1" title="Permanent link"></a></h1>
        <h2 id="_2">介绍<a class="headerlink" href="#_2" title="Permanent link"></a></h2>
        <p>此文档旨在介绍07组开发团队<code>吊销车牌专案组</code>负责设计和开发的<code>车牌识别系统</code></p>
        <h2 id="_3">目录<a class="headerlink" href="#_3" title="Permanent link"></a></h2>
        <div class="toc">
            <ul>
                <li><a href="#_1">车牌识别系统开发文档</a>
                    <ul>
                        <li><a href="#_2">介绍</a></li>
                        <li><a href="#_3">目录</a></li>
                        <li><a href="#_4">总体架构</a></li>
                        <li><a href="#_5">客户端</a></li>
                        <li><a href="#_6">服务端</a>
                            <ul>
                                <li><a href="#_7">架构</a>
                                    <ul>
                                        <li><a href="#nginx">Nginx</a></li>
                                        <li><a href="#uwsgi">uwsgi</a></li>
                                        <li><a href="#django">Django</a>
                                            <ul>
                                                <li><a href="#mvt">MVT架构</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#mysql">关系型数据库MySQL</a></li>
                                    </ul>
                                </li>
                                <li><a href="#_8">开发流程</a>
                                    <ul>
                                        <li><a href="#app">创建项目&amp;APP</a></li>
                                        <li><a href="#_9">设计路由</a></li>
                                        <li><a href="#_10">连接数据库</a></li>
                                        <li><a href="#model">实现Model层</a></li>
                                        <li><a href="#_11">生成数据表</a></li>
                                        <li><a href="#_12">实现后台管理系统</a>
                                            <ul>
                                                <li><a href="#xadmin">下载xadmin</a></li>
                                                <li><a href="#xadmin_1">xadmin的使用</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#template">Template完成首页展示</a>
                                            <ul>
                                                <li><a href="#_13">关于静态资源路径的设置问题</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#view">实现View层</a>
                                            <ul>
                                                <li><a href="#serializer">Serializer序列化</a></li>
                                                <li><a href="#rest-api">REST API的设计&amp;实现</a></li>
                                                <li><a href="#token">Token 权限管理</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#web">本地启动Web服务</a></li>
                                    </ul>
                                </li>
                                <li><a href="#_14">部署到服务器</a>
                                    <ul>
                                        <li><a href="#_15">前置准备</a>
                                            <ul>
                                                <li><a href="#_16">域名解析</a></li>
                                                <li><a href="#_17">网站备案</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#_18">服务器环境</a></li>
                                        <li><a href="#_19">项目代码迁移</a></li>
                                        <li><a href="#nginx_1">Nginx配置</a></li>
                                        <li><a href="#uwsgi_1">uwsgi配置</a></li>
                                        <li><a href="#_20">数据库迁移</a></li>
                                        <li><a href="#_21">收集静态文件到指定目录</a></li>
                                    </ul>
                                </li>
                                <li><a href="#_22">开发环境 &amp; 测试工具</a></li>
                                <li><a href="#python">Python 第三方库</a></li>
                                <li><a href="#_23">远程代码仓库</a></li>
                                <li><a href="#_24">参考资料</a>
                                    <ul>
                                        <li><a href="#_25">文档</a></li>
                                        <li><a href="#_26">文章</a></li>
                                        <li><a href="#_27">问题&amp;解决办法</a></li>
                                        <li><a href="#_28">其他</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <h2 id="_4">总体架构<a class="headerlink" href="#_4" title="Permanent link"></a></h2>
        <p>本项目采用<code>Client/Server</code>架构，客户端使用的是当下流行的微信小程序，服务端采用Python Web开发技术</p>
        <h2 id="_5">客户端<a class="headerlink" href="#_5" title="Permanent link"></a></h2>
        <h2 id="_6">服务端<a class="headerlink" href="#_6" title="Permanent link"></a></h2>
        <h3 id="_7">架构<a class="headerlink" href="#_7" title="Permanent link"></a></h3>
        <p><code>Nginx</code> + <code>uwsgi</code> + <code>Django</code> + <code>Mysql</code>
            工作原理</p>
        <p>Django 的部署可以有很多方式，采用 nginx + uwsgi 的方式是其中比较常见的一种方式。</p>
        <p>在这种方式中，我们的通常做法是，将 nginx 作为服务器最前端，它将接收 web 的所有请求，统一管理请求。nginx 把所有静态请求自己来处理（这是 nginx 的强项）。然后，nginx 将所有非静态请求通过
            uwsgi 传递给 Django，由 Django 来进行处理，从而完成一次 web 请求。
            <img alt="架构" src="https://xiaoshi.site/wp-content/uploads/2020/02/5e4a2a816d612.png"
                title="Optional title" />
        </p>
        <p><img alt="架构" src="https://xiaoshi.site/wp-content/uploads/2020/02/5e4a2a9a1bfea.png"
                title="Optional title" />
            可见，uwsgi 的作用就类似一个桥接器，起到桥梁的作用。</p>
        <h4 id="nginx">Nginx<a class="headerlink" href="#nginx" title="Permanent link"></a></h4>
        <p>Nginx(engine x)
            是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务,在这里我们用它来做反向代理web服务器，可用来作为Web加速，即使用反向代理作为Web服务器的前置机来降低网络和服务器的负载，提高访问效率。
        </p>
        <h4 id="uwsgi">uwsgi<a class="headerlink" href="#uwsgi" title="Permanent link"></a></h4>
        <p>uWSGI是一个Web服务器，它实现了WSGI协议、uwsgi、http等协议。Nginx中HttpUwsgiModule的作用是与uWSGI服务器进行交换。WSGI是一种Web服务器网关接口。它是一个Web服务器（如nginx，uWSGI等服务器）与web应用（如用Flask框架写的程序）通信的一种规范。
        </p>
        <h4 id="django">Django<a class="headerlink" href="#django" title="Permanent link"></a></h4>
        <h6 id="mvt">MVT架构<a class="headerlink" href="#mvt" title="Permanent link"></a></h6>
        <p><img alt="MVT架构图解" src="https://xiaoshi.site/wp-content/uploads/2020/04/django.jpg" /></p>
        <p>目前主流的Python web框架有Django、Flask
            以及Tornado,三者各有优劣，总结起来就是Django大而全，Django拥有非常多的功能，拥有众多组件，是个全能型框架，Flask小而轻，原生组件几乎为0，都来自第三方组件，属于短小精悍型框架；Tornado少而精,主要特点是原生异步非阻塞,在IO密集型应用和多任务处理上占据绝对性的优势,属于专注型框架.本项目选择Django的原因是它功能相对完善，社区相对活跃，Flask对于大型网站开发，需要设计路由映射的规则，否则导致代码混乱，而Django拥有Django
            Rest Framework可以让我们很容易就实现自己的<code>restful</code> API,而tornado的模板和数据库部分有很多第三方的模块可供选择，这样不利于封装为一个功能模块。</p>
        <h4 id="mysql">关系型数据库MySQL<a class="headerlink" href="#mysql" title="Permanent link"></a></h4>
        <p>MySQL 是最流行的关系型数据库管理系统，在 WEB 应用方面 MySQL 是最好的 RDBMS(Relational Database Management
            System：关系数据库管理系统)应用软件之一。考虑到用户与车辆，用户与图片，车辆与图片的关联关系，因此本系统采用关系型数据库MySQL。</p>
        <h3 id="_8">开发流程<a class="headerlink" href="#_8" title="Permanent link"></a></h3>
        <h4 id="app">创建项目&amp;APP<a class="headerlink" href="#app" title="Permanent link"></a></h4>
        <ol>
            <li>安装django
                <div class="codehilite">
                    <pre>pip install <span class="nv">django</span><span class="o">==</span>2.2.7
</pre>
                </div>
            </li>
            <li>创建目录
                <div class="codehilite">
                    <pre>mkdir ~/license-detection/server
</pre>
                </div>
            </li>
            <li>创建项目
                <div class="codehilite">
                    <pre>django-admin startproject vmoli_com
</pre>
                </div>
            </li>
            <li>启动项目
                <div class="codehilite">
                    <pre><span class="nb">cd </span>vmoli_com
python manage.py runserver  
</pre>
                </div>
            </li>
        </ol>
        <ul>
            <li><strong>Django规定Model必须在APP下创建，因为我们要为对应的model创建相应的APP，我们这里创建三个，分别是users、cars和operations</strong></li>
        </ul>
        <ol start="5">
            <li>创建APP
                <div class="codehilite">
                    <pre>python manage.py startapp users <span class="p">|</span> cars <span class="p">|</span> operations
</pre>
                </div>
            </li>
        </ol>
        <ul>
            <li><strong>需要注意的是，创建的app要去全局设置<code>settings.py</code>中注册</strong>
                <div class="codehilite">
                    <pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
    <span class="s">&#39;cars&#39;</span><span class="p">,</span>
    <span class="s">&#39;operations&#39;</span><span class="p">,</span>
    <span class="s">&#39;users&#39;</span><span class="p">,</span>
    <span class="s">&#39;xadmin&#39;</span><span class="p">,</span>
    <span class="s">&#39;crispy_forms&#39;</span><span class="p">,</span>
    <span class="s">&#39;rest_framework&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre>
                </div>
            </li>
        </ul>
        <h4 id="_9">设计路由<a class="headerlink" href="#_9" title="Permanent link"></a></h4>
        <p>主路由在<code>vmoli_com/urls.py</code>中，
            主路由再去各个app下找对应的<code>urls.py</code>路由文件，<code>u</code>代表的是<code>users</code>,
            <code>c</code>代表的是<code>cars</code>, <code>o</code>代表的是<code>operations</code>
        <div class="codehilite">
            <pre><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
                  <span class="c1"># 首页</span>
                  <span class="n">path</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">HomeView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;home&#39;</span><span class="p">),</span>

                  <span class="c1"># 用户</span>
                  <span class="n">path</span><span class="p">(</span><span class="s">&#39;u/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">users_urls</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;users&#39;</span><span class="p">),</span>

                  <span class="c1"># 车辆</span>
                  <span class="n">path</span><span class="p">(</span><span class="s">&#39;c/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">cars_urls</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;cars&#39;</span><span class="p">),</span>

                  <span class="c1"># 用户操作</span>
                  <span class="n">path</span><span class="p">(</span><span class="s">&#39;o/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">operations_urls</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;operations&#39;</span><span class="p">),</span>

                  <span class="c1"># 后台管理系统</span>
                  <span class="n">path</span><span class="p">(</span><span class="s">&#39;admin/&#39;</span><span class="p">,</span> <span class="n">xadmin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>

                  <span class="c1"># api管理</span>
                  <span class="n">path</span><span class="p">(</span><span class="s">&#39;api-auth/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;rest_framework.urls&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s">&#39;rest_framework&#39;</span><span class="p">)),</span>

                  <span class="c1"># 颁发token</span>
                  <span class="n">path</span><span class="p">(</span><span class="s">&#39;api-token-auth/&#39;</span><span class="p">,</span> <span class="n">drf_views</span><span class="o">.</span><span class="n">obtain_auth_token</span><span class="p">)</span>

              <span class="p">]</span> <span class="o">+</span> <span class="n">static</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_URL</span><span class="p">,</span> <span class="n">document_root</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_ROOT</span><span class="p">)</span> <span class="c1"># 静态文件路径</span>
</pre>
        </div>
        </p>
        <h4 id="_10">连接数据库<a class="headerlink" href="#_10" title="Permanent link"></a></h4>
        <p>在连接数据库前，首先要手动的创建一个数据库，Django是不会为我们自动创建数据库的
        <div class="codehilite">
            <pre><span class="k">create</span> <span class="k">database</span> <span class="n">vmoli_com</span>
</pre>
        </div>
        创建完后，我们去<code>settings.py</code>中配置数据库信息
        <div class="codehilite">
            <pre><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.mysql&#39;</span><span class="p">,</span>
        <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;vmoli_com&#39;</span><span class="p">,</span>
        <span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;user&#39;</span><span class="p">,</span>
        <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;password&#39;</span><span class="p">,</span>
        <span class="s">&#39;HOST&#39;</span><span class="p">:</span> <span class="s">&#39;127.0.0.1&#39;</span><span class="p">,</span>
        <span class="s">&#39;PORT&#39;</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>
        </div>
        </p>
        <h4 id="model">实现Model层<a class="headerlink" href="#model" title="Permanent link"></a></h4>
        <p>在实现model层之前需要安装mysqlclient驱动，还需要了解django的<code>orm</code>，具体文档参考 <a
                href="https://docs.djangoproject.com/en/2.2/ref/databases/#mysql-notes">此文档</a></p>
        <p>我们以用户表为例，实现如下：
        <div class="codehilite">
            <pre><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s">u&#39;姓名&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;nobody&#39;</span><span class="p">)</span>
    <span class="o">...</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s">u&#39;用户列表&#39;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="n">verbose_name</span>


    <span class="c1"># 重写str方法，否则后台管理系统出错</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre>
        </div>
        </p>
        <h4 id="_11">生成数据表<a class="headerlink" href="#_11" title="Permanent link"></a></h4>
        <p>创建了model之后，在项目根目录下通过django命令生成数据表，我们在终端用python命令执行以下命令
        <div class="codehilite">
            <pre>python makemigrations xxx
</pre>
        </div>
        这一步django会自动帮我们在migrations文件夹下生成一个预处理文件
        <div class="codehilite">
            <pre>python migrate xxx 
</pre>
        </div>
        这一步就是将生成的预处理文件initialpy脚本中的代码执行，生成一个数据库中的表，完成之后就可以在数据库中查看新增的表了,如果要修改之前创建的表，我们先将models.py的代码修改，然后重新进行以上操作即可
        （注意：如果使用的是MySQL，需要提前安装<code>mysqlclient</code>驱动 安装命令：<code>pip install mysqlclient</code>
        ）</p>
        <h4 id="_12">实现后台管理系统<a class="headerlink" href="#_12" title="Permanent link"></a></h4>
        <p>Django自带一个admin后台管理系统，我们仔细观察不难发现，在我们创建app之后，每个app目录下都会对应有一个<code>admin.py</code>的文件，这个就是用来注册后台管理系统的文件。但是我们在试过django原生的后台管理系统之后决定弃用了，因为我们发现了更好用的管理系统<code>xadmin</code>，它功能强大，比如如果安装了<code>xlrd</code>和<code>xlwt</code>这些Python包后就可以将后台数据表导入到Excel里了，用后觉得Django自带的admin不香了。
        </p>
        <h6 id="xadmin">下载xadmin<a class="headerlink" href="#xadmin" title="Permanent link"></a></h6>
        <p>xadmin有django1.x和2.x的对应兼容版本，我们使用的是Django2.2.7,故<a
                href="https://github.com/sshwsfc/xadmin">点击这里</a>选择对应的分支下载源码并放入我们的项目文件夹</p>
        <h6 id="xadmin_1">xadmin的使用<a class="headerlink" href="#xadmin_1" title="Permanent link"></a></h6>
        <ul>
            <li>在每个app下面创建一个<code>adminx.py</code>的文件，注意名字不可改，xamdin会自动查找每个app下的同名文件</li>
            <li>由于xadmin也是app，我们需要在<code>settings.py</code>中注册</li>
            <li>以User为例，创建一个UserAdmin，注意它继承<code>object</code>
                <div class="codehilite">
                    <pre><span class="kn">import</span> <span class="nn">xadmin</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="k">class</span> <span class="nc">UserAdmin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="n">list_display</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;field1&#39;</span><span class="p">,</span> <span class="s">&#39;field2&#39;</span><span class="p">,</span> <span class="s">&#39;field3&#39;</span><span class="p">,</span> <span class="s">&#39;field4&#39;</span><span class="p">,</span> <span class="s">&#39;field5&#39;</span><span class="p">]</span>
    <span class="o">...</span>
</pre>
                </div>
            </li>
            <li>
                <p><code>list_display</code>表示在后台管理系统展示哪些字段，相关字段还包括<code>search_fields</code>,<code>list_filter</code>等
                </p>
            </li>
            <li>
                <p>最关键的一步，我们需要将model和对应的admin绑定
                <div class="codehilite">
                    <pre><span class="n">xadmin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">UserAdmin</span><span class="p">)</span>
</pre>
                </div>
                </p>
            </li>
            <li>最后再说说两个特殊的admin设置，<code>BaseSetting</code>和<code>GlobalSetting</code>
                <div class="codehilite">
                    <pre><span class="k">class</span> <span class="nc">BaseSetting</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># 主题</span>
    <span class="n">enable_themes</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1">#伸缩导航栏</span>
    <span class="n">use_bootswatch</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">class</span> <span class="nc">GlobalSettings</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># 标题</span>
    <span class="n">site_title</span> <span class="o">=</span> <span class="s">&quot;吊销车牌特案组后台管理系统&quot;</span>
    <span class="c1"># 页脚</span>
    <span class="n">site_footer</span> <span class="o">=</span> <span class="s">&quot;www.vmoli.com&quot;</span>
    <span class="c1"># 菜单样式</span>
    <span class="n">menu_style</span> <span class="o">=</span> <span class="s">&quot;accordion&quot;</span>
</pre>
                </div>
                同样也需要注册
                <div class="codehilite">
                    <pre><span class="kn">from</span> <span class="nn">admin</span> <span class="kn">import</span> <span class="n">views</span> 

<span class="n">xadmin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">views</span><span class="o">.</span><span class="n">BaseAdminView</span><span class="p">,</span> <span class="n">BaseSetting</span><span class="p">)</span>
<span class="n">xadmin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">views</span><span class="o">.</span><span class="n">CommAdminView</span><span class="p">,</span> <span class="n">GlobalSettings</span><span class="p">)</span>
</pre>
                </div>
            </li>
        </ul>
        <h4 id="template">Template完成首页展示<a class="headerlink" href="#template" title="Permanent link"></a></h4>
        <ul>
            <li>由于本系统主要采用客户端完成数据展示和用户交互，因此前端工作量较少，我们主要完成一个首页的设计，我们将我们事先完成好的<code>.js</code>,<code>.css</code>以及<code>.html</code>文件放入根目录下的<code>static</code>文件夹下。
            </li>
            <li>Django采用的类似于MVC架构的MVT架构，Template负责将由View传来的数据进行渲染，因此我们再在根目录下创建一个templete文件夹，用来存放模板。</li>
            <li>编写一个html模板，因为需要引入上面的静态文件资源，因此需要在template中加载<code>staticfiles</code>
                <div class="codehilite">
                    <pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
{% load staticfiles %}
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
...
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre>
                </div>
            </li>
            <li>同时，所有的静态资源路径需要换成动态的形式，这样做的目的是如果今后在静态文件位置改变以后仍然可以很方便的修改，增加了灵活性。
                <div class="codehilite">
                    <pre><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{% static &quot;</span><span class="na">css</span><span class="err">/</span><span class="na">style</span><span class="err">.</span><span class="na">css</span><span class="err">&quot;</span> <span class="err">%}&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">/&gt;</span>
</pre>
                </div>
            </li>
        </ul>
        <h6 id="_13">关于静态资源路径的设置问题<a class="headerlink" href="#_13" title="Permanent link"></a></h6>
        <p>首先,我们配置静态文件,要在<code>setting.py</code>里面加入如下几行代码:
        <div class="codehilite">
            <pre><span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s">&#39;/static/&#39;</span>
<span class="c1"># BASE_DIR 是项目的绝对地址</span>
<span class="n">STATIC_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">&#39;collect_static&#39;</span><span class="p">)</span>
<span class="c1">#以下不是必须的</span>
<span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">&#39;common_static&#39;</span><span class="p">),</span>
<span class="p">)</span> 
</pre>
        </div>
        1. STATIC_ROOT</p>
        <p><code>STATIC_ROOT</code>
            是在部署静态文件时(pyhtonmanage.pycollectstatic)所有的静态文静聚合的目录,<code>STATIC_ROOT</code>要写成绝对地址,在这里,比如我的项目mysite是/home/mysite/
            那么STATIC_ROOT 为 /home/mysite/collect_static/
            当部署项目时,在终端输入:
        <div class="codehilite">
            <pre>python manage.py collectstatic
</pre>
        </div>
        django会把所有的static文件都复制到<code>STATIC_ROOT</code>文件夹下</p>
        <ol start="2">
            <li>STATICFILES_DIRS</li>
        </ol>
        <p>STATIC_ROOT 是在部署的时候才发挥作用, 而实际情况下,静态文件的一般安放位置有两种:</p>
        <ul>
            <li>
                <p>一种就是在每个app里面新建一个static文件夹,将静态文件放到里面,在加载静态文件时,比如要在模板中用到静态文件,django会自动在每个app里面搜索static文件夹(所以,不要把文件夹的名字写错哦,
                    否则django就找不到你的文件夹了)</p>
            </li>
            <li>
                <p>另一种,就是在所有的app文件外面,建立一个公共的文件夹,
                    因为有些静态文件不是某个app独有的,那么就可以把它放到一个公共文件夹里面,方便管理(注意,建立一个公共的静态文件的文件夹只是一种易于管理的做法,但是不是必须的,app是可以跨app应用静态文件的,因为最后所有的静态文件都会在STATIC_ROOT里面存在)
                    那现在的问题是如何让django知道你把一些静态文件放到app以外的公共文件夹中呢,那就需要配置<code>STATICFILES_DIRS</code>了
                <div class="codehilite">
                    <pre><span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">&#39;common_static&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre>
                </div>
                STATICFILES_DIRS告诉django,首先到STATICFILES_DIRS里面寻找静态文件,其次再到各个app的static文件夹里面找(注意,
                django查找静态文件是惰性查找,查找到第一个,就停止查找了)</p>
            </li>
        </ul>
        <ol start="3">
            <li>STATIC_URL</li>
        </ol>
        <p>那么到此为止,静态文件的机制就可以运作了,但是有一个问题,我能不能通过url直接访问我在项目中的静态文件呢,答案肯定是啦,但是,注意,你是在浏览器是访问,你不可能输入你的静态文件的本地绝对地址吧,比如我的一种图片的本地地址为
            /home/mysite/common_static/myapp/photo.png
            那么别人不可能在浏览器上直接输入:
            <a
                href="http://127.0.0.1:8000/home/mysite/common_static/myapp/photo.png">http://127.0.0.1:8000/home/mysite/common_static/myapp/photo.png</a>
            这样子,浏览器会报错, 没有该页面
            那么django是如何让浏览器也可以访问服务器上的静态文件呢,前面已经说了,直接访问服务器本地的地址是不行的,那就需要一个映射,django利用<code>STATIC_URL</code>来让浏览器可以直接访问静态文件,比如:
        <div class="codehilite">
            <pre><span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s">&#39;/static/&#39;</span>
</pre>
        </div>
        那么可以在浏览器上输入:
        <a
            href="http://127.0.0.1:8000/static/common_static/myapp/photo.png">http://127.0.0.1:8000/static/common_static/myapp/photo.png</a>
        那么就相当与访问/home/mysite/common_static/myap/photo.png</p>
        <p>所以在浏览器上,利用前缀 STATIC_URL的具体内容,来映射STATIC_ROOT,
            <a href="HTTP://127.0.0.1:8000/static">HTTP://127.0.0.1:8000/static</a> 相当于 本地地址的STATIC_ROOT
        </p>
        <h4 id="view">实现View层<a class="headerlink" href="#view" title="Permanent link"></a></h4>
        <p>如果说template层的主要工作在于思考以什么形式展示数据，那么view层则是规定了要展示哪些数据，它介于template和model之间，主要做一些逻辑处理从而得到需要的数据，在我们的系统中是前后端分离的，因此在view中主要的工作就是制作相关的<code>API接口</code>
        </p>
        <h5 id="serializer">Serializer序列化<a class="headerlink" href="#serializer" title="Permanent link"></a></h5>
        <p>在我看来，Serializer有点类似于Form表单，它也是在model进行读取操作之前所做的额外工作，比如提交的数据是否合理，哪些字段需要验证，哪些需要处理，都是通过Serializer完成的，只有合格的数据才有可能插入到数据库中。起初我们使用的是Django自带的Serailizer,但是它存在一些限制，比如它虽然能够处理像ImageFile这种类型的数据，但是它返回的路径并不太完整，还需要做后续的处理。还有它返回来的json数据中的字段结构是以model的结构组织的，但这并不是我想要的组织方式，怎么解决这些问题？<code>Django Rest Framework</code>就很好的解决这些问题了！
        </p>
        <p>在安装完了<code>djangorestframework</code>之后，我们可以使用其serializer,我们知道form表单中有一种特殊的表单ModelFrom,它是对Model字段的映射，那么Serializer有没有对应的ModelSerializer呢？答案是yes,我们这里使用的正是这样一种Serailizer
        <div class="codehilite">
            <pre><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span> 
<span class="k">class</span> <span class="nc">UserSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">User</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="s">&#39;__all__&#39;</span>
</pre>
        </div>
        因为我们使用的是所有字段，因此fields字段直接写成<code>__all__</code>，以上就完成了一个简单的序列化工作，如果一个字段是外键，要想看到详细字段的话，可以进行嵌套，比如我们的图片记录有一个车辆字段，它是一个外键，那么如果想在返回json数据时同时看到车辆的详细信息的话，就可以先做车辆的序列化，再做图片的序列化，具体实现见代码：
        <div class="codehilite">
            <pre><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Car</span><span class="p">,</span> <span class="n">Image</span>


<span class="k">class</span> <span class="nc">CarSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Car</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="s">&#39;__all__&#39;</span>


<span class="k">class</span> <span class="nc">ImageSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">car</span> <span class="o">=</span> <span class="n">CarSerializer</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Image</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="s">&#39;__all__&#39;</span>

    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Image</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="n">validated_data</span><span class="p">)</span>
</pre>
        </div>
        </p>
        <h5 id="rest-api">REST API的设计&amp;实现<a class="headerlink" href="#rest-api" title="Permanent link"></a></h5>
        <h5 id="token">Token 权限管理<a class="headerlink" href="#token" title="Permanent link"></a></h5>
        <p>前后端分离后，原先，我们使用模板的时候用到的防止跨站请求验证的csrf_token同样也不再被需要了，因为客户端访问服务器本身就是跨站请求。我们使用了<code>Django Rest Framework</code>的token认证机制，通过对每个用户绑定一个token进行认证和赋予权限的操作，REST框架提供了许多开箱即用的身份验证方案，还允许开发者实现自定义方案，相关文档
            <a href="https://www.django-rest-framework.org/api-guide/authentication/">点击这里</a></p>
        <p>首先我们需要在项目下的settings.py文件中添加<code>TokenAuthentication</code></p>
        <p>
        <div class="codehilite">
            <pre><span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s">&#39;rest_framework.authentication.BasicAuthentication&#39;</span><span class="p">,</span>
        <span class="s">&#39;rest_framework.authentication.SessionAuthentication&#39;</span><span class="p">,</span>
        <span class="s">&#39;rest_framework.authentication.TokenAuthentication&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre>
        </div>
        接着我们要注册app</p>
        <div class="codehilite">
            <pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="s">&#39;rest_framework.authtoken&#39;</span>
<span class="p">]</span>
</pre>
        </div>

        <p>注册之后，在终端输入如下命令来生成用户的token记录表
        <div class="codehilite">
            <pre>python manage.py makemigrations
python manage.py migrate
</pre>
        </div>
        每当我们创建新用户的时候，就为其生成一个token值</p>
        <div class="codehilite">
            <pre><span class="kn">from</span> <span class="nn">rest_framework.authtoken.models</span> <span class="kn">import</span> <span class="n">Token</span>

<span class="n">token</span> <span class="o">=</span> <span class="n">Token</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">user</span><span class="o">=...</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
</pre>
        </div>

        <p>在调用API的时候，在请求头headers中添加<code>Authorization</code>字段，注意值的格式是Token+空格+字符串</p>
        <div class="codehilite">
            <pre><span class="err">Authorization: Token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b</span>
</pre>
        </div>

        <p>我们将全局默认权限设置为<code>AllowAny</code></p>
        <p>
        <div class="codehilite">
            <pre><span class="s">&#39;DEFAULT_PERMISSION_CLASSES&#39;</span><span class="p">:</span> <span class="p">(</span>
        <span class="s">&#39;rest_framework.permissions.AllowAny&#39;</span><span class="p">,</span>
    <span class="p">)</span>
</pre>
        </div>
        在APIView中可以设置具体的权限,比如调用用户列表的接口权限设置成仅为管理员,只需要填写<code>permission_classes</code>字段</p>
        <div class="codehilite">
            <pre><span class="kn">from</span> <span class="nn">rest_framework.permissions</span> <span class="kn">import</span> <span class="n">IsAdminUser</span><span class="p">,</span> <span class="n">IsAuthenticated</span><span class="p">,</span> <span class="n">AllowAny</span>
<span class="k">class</span> <span class="nc">UserList</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    用户列表</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># 只有管理员可以使用该接口，普通用户返回403forbidden</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAdminUser</span><span class="p">]</span>
    <span class="o">...</span>
</pre>
        </div>

        <p>再比如查看车辆列表的接口允许登陆用户调用，其他人只读，拥有者可读可写
        <div class="codehilite">
            <pre><span class="kn">from</span> <span class="nn">rest_framework.permissions</span> <span class="kn">import</span> <span class="n">IsAdminUser</span><span class="p">,</span> <span class="n">IsOwnerOrReadOnly</span>
<span class="k">class</span> <span class="nc">CarDetail</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    车辆详情</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">,</span><span class="n">IsOwnerOrReadOnly</span><span class="p">]</span>
    <span class="o">...</span>
</pre>
        </div>
        </p>
        <h4 id="web">本地启动Web服务<a class="headerlink" href="#web" title="Permanent link"></a></h4>
        <p>打开终端，切换目录到项目根目录下
        <div class="codehilite">
            <pre><span class="nb">cd</span> ~/project/vmoli_com
</pre>
        </div>
        输入以下命令即可通过浏览器访问web服务，将<code>settings.py</code>中的debug设置为<code>True</code>，就可以在报错的时候打印具体错误信息，当然上线的时候记得关掉调试</p>
        <div class="codehilite">
            <pre>python3 manage.py runserver 127.0.0.1:8000
</pre>
        </div>

        <h3 id="_14">部署到服务器<a class="headerlink" href="#_14" title="Permanent link"></a></h3>
        <h4 id="_15">前置准备<a class="headerlink" href="#_15" title="Permanent link"></a></h4>
        <h6 id="_16">域名解析<a class="headerlink" href="#_16" title="Permanent link"></a></h6>
        <p>首先我们需要进行域名解析，将你已经准备好的域名解析到你租用的主机上。我使用的是腾讯的域名与主机屋的虚拟主机（其他的也类似），具体操作如下：</p>
        <ol>
            <li>登陆腾讯云官网：</li>
        </ol>
        <p><a href="https://cloud.tencent.com">https://cloud.tencent.com</a></p>
        <ol start="2">
            <li>进入控制台-&gt;域名注册-&gt;我的域名</li>
        </ol>
        <p>点击右下方蓝色字体解析</p>
        <p>在域名解析中添加www主机记录和@主机记录 类型为A，线路类型默认，重点在记录值中填入你租用的主机IP地址。</p>
        <p>当然，要通过域名访问主机还需要在nginx配置域名，这个下面再说</p>
        <p>至此，域名解析完成</p>
        <h6 id="_17">网站备案<a class="headerlink" href="#_17" title="Permanent link"></a></h6>
        <p>相关政策规定了使用大陆服务器开办网站的需要进行备案，通过后需要在网站页脚标注备案号并可以直接访问工业与信息化部网站首页 <a
                href="http://www.beian.miit.gov.cn">http://www.beian.miit.gov.cn</a></p>
        <p>备案过程大致流程如下：</p>
        <ol>
            <li>
                <p>进入备案系统</p>
            </li>
            <li>
                <p>填写备案信息</p>
            </li>
            <li>
                <p>云服务商审核</p>
            </li>
            <li>
                <p>管局审核</p>
            </li>
            <li>
                <p>备案成功</p>
            </li>
        </ol>
        <p>大概耗时20天</p>
        <h4 id="_18">服务器环境<a class="headerlink" href="#_18" title="Permanent link"></a></h4>
        <ul>
            <li>系统 ：Ubuntu 18.04</li>
            <li>Python： 3.6</li>
            <li>MySQL ： 5.7</li>
        </ul>
        <h4 id="_19">项目代码迁移<a class="headerlink" href="#_19" title="Permanent link"></a></h4>
        <p>我们利用gitee远程仓库代码将master分支部署到服务器，在服务器上克隆仓库代码之前，需要在gitee中进行公钥部署设置，部署公钥允许以只读的方式访问仓库，主要用于仓库在生产服务器的部署上，免去HTTP方式每次操作都要输入密码和普通SSH方式担心不小心修改仓库代码的麻烦。部署公钥配置后的机器，只支持clone与pull等只读操作。如果想要对仓库进行写操作，请添加个人公钥。<a
                href="https://gitee.com/help/articles/4191#article-header0">具体细节查看此文档</a></p>
        <h4 id="nginx_1">Nginx配置<a class="headerlink" href="#nginx_1" title="Permanent link"></a></h4>
        <div class="codehilite">
            <pre># the upstream component nginx needs <span class="k">to</span> connect <span class="k">to</span>
upstream django {
# server unix:<span class="sr">///path/</span><span class="k">to</span><span class="sr">/your/</span>mysite/mysite.sock; # <span class="k">for</span> <span class="k">a</span> <span class="k">file</span> socket
server <span class="m">127</span>.<span class="m">0</span>.<span class="m">0</span>.<span class="m">1</span>:<span class="m">8001</span>; # <span class="k">for</span> <span class="k">a</span> web port socket <span class="p">(</span>we&#39;<span class="k">ll</span> use this <span class="k">first</span><span class="p">)</span>
}
# configuration of the server

server {
# the port your site will be served <span class="k">on</span>
listen      <span class="m">80</span> default_server;
listen [::]:<span class="m">80</span> default_server;

# the domain name it will serve <span class="k">for</span>
server_name vmoli.<span class="k">com</span> xxx.xx.xxx.xxx ; # substitute your machine&#39;s IP address or FQDN
#charset     utf<span class="m">-8</span>;
charset utf<span class="m">-8</span><span class="p">,</span>gbk;
# max upload size
client_max_body_size <span class="m">75</span>M;   # adjust <span class="k">to</span> taste


location /static {
    alias <span class="sr">/.../</span>vmoli_com/static;
}

location /media {
    alias <span class="sr">/.../</span>vmoli_com/media;
}
# Finally<span class="p">,</span> send <span class="k">all</span> non<span class="p">-</span>media requests <span class="k">to</span> the Django server.
location / {
    uwsgi_pass  django;
    <span class="nb">include</span>     uwsgi_params; # the uwsgi_params <span class="k">file</span> you installed
}
}


# 以下属性中以ssl开头的属性代表与证书配置有关，其他属性请根据自己的需要进行配置。
server {
listen <span class="m">443</span> <span class="nb">ssl</span>;   #SSL协议访问端口号为443。此处如未添加ssl，可能会造成Nginx无法启动。
server_name vmoli.<span class="k">com</span>;  #将localhost修改为您证书绑定的域名，例如：www.example.<span class="k">com</span>。
                                                                                                                                            <span class="m">1</span><span class="p">,</span>
</pre>
        </div>

        <p>启动nginx命令
        <div class="codehilite">
            <pre>sudo /etc/init.d/nginx start 
</pre>
        </div>
        </p>
        <h4 id="uwsgi_1">uwsgi配置<a class="headerlink" href="#uwsgi_1" title="Permanent link"></a></h4>
        <div class="codehilite">
            <pre><span class="p">[</span><span class="n">uwsgi</span><span class="p">]</span>
<span class="c1"># 端口</span>
<span class="n">socket</span> <span class="o">=</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8001</span>
<span class="c1"># 项目目录</span>
<span class="n">chdir</span> <span class="o">=</span> <span class="o">/.../</span><span class="n">vmoli_com</span>
<span class="c1"># 使用的wsgi模块</span>
<span class="n">module</span> <span class="o">=</span> <span class="n">vmoli_com</span><span class="o">.</span><span class="n">wsgi</span>
<span class="c1"># 主进程</span>
<span class="n">master</span> <span class="o">=</span> <span class="n">true</span>
<span class="c1"># 进程数</span>
<span class="n">processes</span> <span class="o">=</span> <span class="mi">4</span>
<span class="c1"># 退出、重启时清理文件</span>
<span class="n">vacuum</span> <span class="o">=</span> <span class="n">true</span>
</pre>
        </div>

        <p>启动uwsgi命令
        <div class="codehilite">
            <pre>uwsgi --ini your_module.ini
</pre>
        </div>
        </p>
        <h4 id="_20">数据库迁移<a class="headerlink" href="#_20" title="Permanent link"></a></h4>
        <p>如果之前在测试环境下已经生成过数据表，那么项目的每个app下的migrations目录都会保留操作记录，在进行数据库迁移的时候就不需要再次<code>makemigrations</code>操作了，只需要执行以下命令即可
        </p>
        <div class="codehilite">
            <pre>python3 manage.py migrate 
</pre>
        </div>

        <h4 id="_21">收集静态文件到指定目录<a class="headerlink" href="#_21" title="Permanent link"></a></h4>
        <p>静态文件需要在项目启动前统一收集到指定的目录中，这样可以提高网站的访问速度，django会收集每个app下对应的静态文件，然后会收集根目录下的静态文件，这些都需要在<code>settings.py</code>中设置，具体请看[关于静态资源路径的设置问题]
            收集静态文件命令
        <div class="codehilite">
            <pre>python manage.py collectstatic
</pre>
        </div>
        </p>
        <h3 id="_22">开发环境 &amp; 测试工具<a class="headerlink" href="#_22" title="Permanent link"></a></h3>
        <ul>
            <li>Python 3.7</li>
            <li>IDE PyCharm</li>
            <li>Jupyter Notebook</li>
            <li>Postman</li>
            <li>Sublime Text 3 (Markdown)</li>
            <li>git 版本控制</li>
        </ul>
        <h3 id="python">Python 第三方库<a class="headerlink" href="#python" title="Permanent link"></a></h3>
        <div class="codehilite">
            <pre><span class="nv">coreapi</span><span class="o">==</span>2.3.3
<span class="nv">Django</span><span class="o">==</span>2.2.7
django-crispy-forms<span class="o">==</span>1.9.0
django-filter<span class="o">==</span>2.2.0
django-formtools<span class="o">==</span>2.2
django-guardian<span class="o">==</span>2.2.0
django-import-export<span class="o">==</span>2.0.2
<span class="nv">djangorestframework</span><span class="o">==</span>3.11.0
<span class="nv">future</span><span class="o">==</span>0.18.2
<span class="nv">hyperlpr</span><span class="o">==</span>0.0.2
<span class="nv">idna</span><span class="o">==</span>2.9
<span class="nv">ipython</span><span class="o">==</span>7.13.0
ipython-genutils<span class="o">==</span>0.2.0
<span class="nv">Jinja2</span><span class="o">==</span>2.11.1
<span class="nv">Markdown</span><span class="o">==</span>3.2.1
<span class="nv">MarkupPy</span><span class="o">==</span>1.14
<span class="nv">MarkupSafe</span><span class="o">==</span>1.1.1
<span class="nv">mysqlclient</span><span class="o">==</span>1.4.6
<span class="nv">numpy</span><span class="o">==</span>1.18.2
opencv-python<span class="o">==</span>3.4.3.18
<span class="nv">Pillow</span><span class="o">==</span>7.0.0
<span class="nv">Pygments</span><span class="o">==</span>2.6.1
<span class="nv">xlrd</span><span class="o">==</span>1.2.0
<span class="nv">xlwt</span><span class="o">==</span>1.3.0
</pre>
        </div>

        <h3 id="_23">远程代码仓库<a class="headerlink" href="#_23" title="Permanent link"></a></h3>
        <p><a href="https://gitee/weijizhu/license-detection">本项目托管于Gitee 点击这里</a></p>
        <h3 id="_24">参考资料<a class="headerlink" href="#_24" title="Permanent link"></a></h3>
        <h4 id="_25">文档<a class="headerlink" href="#_25" title="Permanent link"></a></h4>
        <ul>
            <li>
                <p><a href="https://docs.python.org/3/contents.html">Python Documentation</a></p>
            </li>
            <li>
                <p><a href="https://packaging.python.org/tutorials/installing-packages/">Package for Python </a></p>
            </li>
            <li>
                <p><a href="https://docs.djangoproject.com/en/2.2/">Django 2.2 Documentation</a></p>
            </li>
            <li>
                <p><a href="https://www.django-rest-framework.org">Django Rest Framework Documentation</a></p>
            </li>
            <li>
                <p><a href="http://nginx.org/en/docs/">Nginx Documentation</a></p>
            </li>
        </ul>
        <h4 id="_26">文章<a class="headerlink" href="#_26" title="Permanent link"></a></h4>
        <ul>
            <li>
                <p><a href="https://blog.csdn.net/xiaoxiaole0313/article/details/104404374">密码加密存储</a></p>
            </li>
            <li>
                <p><a href="https://blog.csdn.net/paul0926/article/details/90763904">Serializer序列化器/串行器</a></p>
            </li>
            <li>
                <p><a href="https://www.cnblogs.com/stfei/p/9416652.html">drf 认证、权限、限制</a></p>
            </li>
            <li>
                <p><a href="https://www.cnblogs.com/wenqiangit/p/9592132.html">前后端分离之JWT用户认证</a></p>
            </li>
            <li>
                <p><a href="https://blog.csdn.net/weixin_42142216/article/details/91376716">serializer 的使用</a></p>
            </li>
            <li>
                <p><a href="https://www.cnblogs.com/zyj-python/p/7522471.html">django实现邮箱发送功能</a></p>
            </li>
            <li>
                <p><a href="https://code.ziqiangxuetang.com/django/django-send-email.html">django发送html内容的邮件</a></p>
            </li>
            <li>
                <p><a href="https://blog.csdn.net/qq_41664526/article/details/80069158">django编写邮箱注册以及验证码</a>
                    ￼</p>
            </li>
            <li>
                <p><a href="https://blog.csdn.net/q3102885/article/details/83303415">django make_password &amp;
                        check_password 非对称加密</a></p>
            </li>
            <li>
                <p><a href="https://xiaoshi.site/archives/509">Python 通过Ngin部署Django项目</a></p>
            </li>
            <li>
                <p><a href="https://blog.csdn.net/pengjunlee/article/details/91127222">Python中Base64编码与解码</a></p>
            </li>
            <li>
                <p><a href="https://www.w3cschool.cn/lxraw/lxraw-3meu35ov.html">Django drf 权限</a></p>
            </li>
            <li>
                <p><a href="https://www.chenshaowen.com/blog/permissions-of-django-rest-framework.html">Django rest
                        framework认证与权限</a></p>
            </li>
            <li>
                <p><a href="https://blog.csdn.net/qq_25420115/article/details/53149669">datetime
                        offset-aware与offset-navie相互转换</a></p>
            </li>
            <li>
                <p><a href="https://www.cnblogs.com/languoliang/archive/2013/04/01/nginx.html">Ubuntu中Nginx的安装与配置</a>
                </p>
            </li>
            <li>
                <p><a href="https://www.jianshu.com/p/7979d3e32495">Django Media Url的配置</a></p>
            </li>
            <li>
                <p><a href="https://xiaoshi.site/archives/540">一些关于ssh的配置</a></p>
            </li>
        </ul>
        <h4 id="_27">问题&amp;解决办法<a class="headerlink" href="#_27" title="Permanent link"></a></h4>
        <ul>
            <li>
                <p><a href="https://blog.csdn.net/weixin_33127753/article/details/89100552">mysqlclient安装出错的解决办法</a></p>
            </li>
            <li>
                <p><a href="https://blog.csdn.net/weixin_39792252/article/details/80415550">Ubuntu的中文乱码问题</a></p>
            </li>
            <li>
                <p><a href="https://xiaoshi.site/archives/537">Linux和windows中的换行符差异问题</a></p>
            </li>
        </ul>
        <h4 id="_28">其他<a class="headerlink" href="#_28" title="Permanent link"></a></h4>
        <ul>
            <li>
                <p>个人博客地址
                    <a href="https://xiaoshi.site">https://xiaoshi.site</a>
                </p>
            </li>
            <li>
                <p>项目网站
                    <a href="https://vmoli.com">https://vmoli.com</a>
                </p>
            </li>
        </ul>
    </article>
</body>

</html>