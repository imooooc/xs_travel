<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>JavaScript Note&Demo</title>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <style>
        h1{
            color:#7434a9;
        }
        h3{
            color:#7434a9;
        }
        .box{
            width: 1200px;
            margin:20px auto;
            border: 1px solid #000;
            padding:20px;
        }
        .line{
            height: 0;
            border: 1px dashed #000;
            margin:20px 0;
        }
        .ball{
            position: absolute;
            border-radius: 50%;
        }
        @keyframes r {
        0%{
            color: red;
        }
        100%{
            color: rgba(0,0,0);
        }
    }
        #ballpool{
            /* width: 600px; */
            height: 400px;
            background-color: black;
            text-align: center;
            line-height: 400px;
            animation: r 1.5s ease-in-out 0s  alternate infinite;
        }
    
    </style>
</head>

<body>
    <div class="box">
        <h1>JavaScript Notes&Demo</h1>
        <div class="line"></div> <!-- 华丽分割线 -->
        <h3>事件委托</h3>
        <ul id='lang'>
            <li id='1'>HTML</li>
            <li id='2'>CSS</li>
            <li id='3'>JavaScript</li>
            <li id='4'>jquery</li>
            <li id='5'>HTML5</li>
            <li id='6'>CSS3</li>
            <li id='7'>ES6</li>
        </ul>
        <script type="text/javascript">
            // var li = document.getElementById('3');
            // li.addEventListener('mouseenter', function(e){e.target.style.color = 'red'; },true);
            // li.addEventListener('mouseleave', function(e){e.target.style.color = 'black'; },true);
            var ul = document.getElementById('lang');
            ul.addEventListener('mouseover', function(e){
                e.target.style.color = 'red';
            },true);
            ul.addEventListener('mouseout', function(e){
                e.target.style.color = 'black';
            },true);
        </script>
        <div class="line"></div> <!-- 华丽分割线 -->
        <h3>模板字符串</h3>
        <label for="procvince">省/市/区</label>
        <select id="province">
        </select>
        <script>
            let provinces =
                ["北京市", "天津市",
                    "上海市", "重庆市", "河北省", "山西省",
                    "辽宁省", "吉林省", "黑龙江省", "江苏省"
                    , "浙江省", "安徽省", "福建省", "江西省",
                    "山东省", "河南省", "湖北省", "湖南省",
                    "广东省", "海南省", "四川省", "贵州省",
                    "云南省", "陕西省", "甘肃省", "青海省",
                    "台湾省", "内蒙古自治区", "广西壮族自治区",
                    "西藏自治区", "宁夏回族自治区", "新疆维吾尔自治区",
                    "香港特别行政区", "澳门特别行政区"];
            let oSelect = document.getElementById('province');
            let html = ``;
            for(let i=0;i<provinces.length;i++){
                html += `<option>${provinces[i]}</option>`;
            }
            oSelect.innerHTML = html;
        </script>
        <div class="line"></div> <!-- 华丽分割线 -->
        <h3>this指向问题 </h3>
        <pre><code class="language-javascript">
            const obj = {
            fn1: function(){
            console.log(this, 'from fn1');
            },
            fn2: test
            }
            function test(){
            console.log(this, 'from test');
            setTimeout(function () {
            console.log(this, 'from setTimeout');
            })
            }
            const res = obj.fn1;
            res();
            obj.fn2();
            //结果请看console输出
        </code></pre>
            
        <script>
            const obj = {
                fn1: function(){
                    console.log(this, 'from fn1');
                },
                fn2: test
            }
            function test(){
                console.log(this, 'from test');
                setTimeout(function () {
                    console.log(this, 'from setTimeout');
                })
            }
            const res = obj.fn1;
            res();
            obj.fn2();
        </script>
        <div class="line"></div> <!-- 华丽分割线 -->
        <h3>面向对象</h3>
        <div id="ballpool">请将鼠标在此区域移动</div>
        <script>
            function Ball(x, y) {
                this.x = x;
                this.y = y;
                this.r = 10;
                this.opacity = 1;
                this.color = this.getRandomColor();
                do {
                    this.dX = Math.floor(Math.random() * (10 - (-10) + 1)) + (-10);
                    this.dY = Math.floor(Math.random() * (10 - (-10) + 1)) + (-10);
                } while (this.dX == 0 && this.dY == 0);

                this.init();
                ballArr.push(this);
            }
            Ball.prototype.getRandomColor = function () {
                var colorArr = ['#00FFFF', '#A020F0', '#DA70D6', '#FF6347', '#FF7D40', '#F0FFFF', '#03A89E', '#00C78C'];
                return colorArr[parseInt(Math.random() * (colorArr.length))]; // parseInt(Math.random() * (max - min + 1) + min )
            }
            Ball.prototype.init = function () {
                this.dom = document.createElement('div');
                this.dom.className = 'ball';
                this.dom.style.backgroundColor = this.color;
                this.dom.style.height = this.r * 2 + 'px';
                this.dom.style.width = this.r * 2 + 'px';
                this.dom.style.left = this.x - this.r + 'px';
                this.dom.style.top = this.y - this.r + 'px';
                //on the tree
                document.body.appendChild(this.dom);
            }
            Ball.prototype.update = function () {
                //modify postion
                this.x += this.dX;
                this.y += this.dY;
                //modify radius
                this.r += 0.2;
                //modify opacity
                this.opacity -= 0.05;
                //modify style based on data above
                this.dom.style.height = this.r * 2 + 'px';
                this.dom.style.width = this.r * 2 + 'px';
                this.dom.style.left = this.x - this.r + 'px';
                this.dom.style.top = this.y - this.r + 'px';
                this.dom.style.opacity = this.opacity;
                this.dom.style.backgroundColor = this.color;
                if (this.opacity < 0) {
                    for (var i = 0; i < ballArr.length; i++) {
                        if (ballArr[i] == this) {
                            ballArr.splice(i, 1);
                        }
                    }
                    document.body.removeChild(this.dom);
                }

            }
            var ballArr = [];
            setInterval(function () {
                for (var i = 0; i < ballArr.length; i++) {
                    ballArr[i].update();
                }
            }, 20);

            // document.onmousemove = function (e) {
            //     var x = e.clientX;
            //     var y = e.clientY;
            //     new Ball(x, y);
            // }
            // 把触发区域固定在ballpool里
            var oBallPool = document.getElementById('ballpool');
            oBallPool.onmousemove = (e) =>{
                var x = e.pageX;
                var y = e.pageY;
                new Ball(x,y);
            }
        </script>
        <div class="line"></div><!-- 华丽分割线 -->
    </div>
</body>

</html> 